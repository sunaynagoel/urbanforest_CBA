"0",""
"0",""
"0","renderValueBox ({"
"0","  input.dat <- dat %>% "
"0","  filter (species %in% tolower(input$species_trees))"
"0","  # filter type convenient "
"0","  filtered.dat <-input.dat %>% "
"0","  filter (correct_vs_convenient %in% tolower(input$planting_method)) "
"0",""
"0","    # number of trees needed to offset carbon "
"0",""
"0","  n_tree <- round ((as.numeric(input$lbs_carbon)/sum(filtered.dat$co2reduction_lb)) * input$num_trips)"
"0",""
"0","  if (n_tree <= 0)"
"0","  {"
"0","    n_tree <- 1"
"0","  }"
"0"," "
"0",""
"0","   cost.y0 <-  filtered.dat %>% "
"0","   filter (year == 0) %>% "
"0","   select (cost_total)"
"0","   cashflow.yearly <- filtered.dat %>% "
"0","   filter (year == 1 |  year == 2 | year == 3 | year == 4 | year == 5 | year == 6 |year == 7 | year == 8 | year == 9 | "
"0","             year == 10 | year == 11| year == 12| year == 13 | year == 14 | year == 15 | year == 16 | year == 17 | year == 18|"
"0","             year == 19| year == 20| year == 21| year == 22| year == 23 | year == 24 | year == 25 | year == 26 | year == 27 |"
"0","             year == 28 | year == 29 | year == 30 ) %>% "
"0","             select(ben_total)"
"0",""
"0","   cashflow.yearly <- as.numeric(unlist(cashflow.yearly[[1]])) "
"0",""
"0","   times <- as.numeric(1:30)"
"0",""
"0","   interest.npv <- (as.numeric(input$npv_rate) /100)"
"0",""
"0","   interest.npv <- as.numeric(interest.npv)"
"0",""
"0","   npv_per_tree <- NPV (as.numeric(cost.y0), cashflow.yearly, times, interest.npv, plot=FALSE)"
"0","  "
"0","  npv_total <- round((npv_per_tree * n_tree),2)"
"0"," "
"0"," valueBox( npv_total, "
"0","           icon = ""fas fa-money"","
"0","           color = ifelse(  npv_total > 1, ""green"", ""primary"") ) "
"0","  "
"0","}"
"0",")"
"1","<shiny.render.function> 
"
