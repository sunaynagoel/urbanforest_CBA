# NPV from the tree installtion and explaination in case of correct and convenient installtion
#NPV(cf0,cf,times,i,plot=FALSE)
cost.correct.y0 <-  correct.dat %>%
filter (year == 0) %>%
select (cost_total)
cashflow.correct.yearly <- correct.dat %>%
filter (year == 1 |  year == 2 | year == 3 | year == 4 | year == 5 | year == 6 |year == 7 | year == 8 | year == 9 |
year == 10 | year == 11| year == 12| year == 13 | year == 14 | year == 15 | year == 16 | year == 17 | year == 18 |
year == 19| year == 20| year == 21| year == 22| year == 23 | year == 24 | year == 25 | year == 26 | year == 27 |
year == 28 | year == 29 | year == 30 ) %>%
select(ben_total)
times.correct <- 1:30
interest.npv <- as.numeric(.03)
npv.correct <- NPV (as.numeric(cost.correct.y0), as.numeric(is.numeric(cashflow.correct.yearly)), as.numeric(is.numeric(times.correct)), interest.npv, plot=FALSE )
npv.table <- as.dataframe ( "detail" = c("Net Present Value of benefit fpr 30 year period from Planting tree correctly"),
"value" = npv.correct)
npv.table
# NPV from the tree installtion and explaination in case of correct and convenient installtion
#NPV(cf0,cf,times,i,plot=FALSE)
cost.correct.y0 <-  correct.dat %>%
filter (year == 0) %>%
select (cost_total)
cashflow.correct.yearly <- correct.dat %>%
filter (year == 1 |  year == 2 | year == 3 | year == 4 | year == 5 | year == 6 |year == 7 | year == 8 | year == 9 |
year == 10 | year == 11| year == 12| year == 13 | year == 14 | year == 15 | year == 16 | year == 17 | year == 18 |
year == 19| year == 20| year == 21| year == 22| year == 23 | year == 24 | year == 25 | year == 26 | year == 27 |
year == 28 | year == 29 | year == 30 ) %>%
select(ben_total)
times.correct <- 1:30
interest.npv <- as.numeric(.03)
npv.correct <- NPV (as.numeric(cost.correct.y0), as.numeric(is.numeric(cashflow.correct.yearly)), as.numeric(is.numeric(times.correct)), interest.npv, plot=FALSE )
npv.table <- data.frame ( "detail" = c("Net Present Value of benefit fpr 30 year period from Planting tree correctly"),
"value" = npv.correct)
npv.table
#colnames(dat)
# use the user input of trees to filter data
renderTable ({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type convenient
convenient.dat <-input.dat %>%
filter (correct_vs_convenient == "convenient")
# calculate the carbon reduced by one tree by convenient installation
carbon_convenient <- sum(convenient.dat$co2reduction_lb)
#carbon_convenient
# number of trees needed to offset carbon
n_tree_convenient <- round ( as.numeric(input$lbs_carbon)/carbon_convenient)
#n_tree_convenient
# filter type correct
correct.dat <- input.dat %>%
filter (correct_vs_convenient == "correct")
# calculate the carbon reduced by one tree by convenient installation
carbon_correct <- sum(correct.dat$co2reduction_lb)
#carbon_correct
# can't get input$lbs_carbon to work
n_tree_correct <- round (as.numeric(input$lbs_carbon)/carbon_correct)
#n_tree_correct
table.output <- matrix(c(carbon_convenient, n_tree_convenient, carbon_correct, n_tree_correct ), ncol=2,byrow=TRUE)
colnames(table.output) <- c("Carbon_reduced_LBS)","Number_of_trees_needed")
rownames(table.output) <- c("Convenient Planting","Correct Planting")
table.output <- data.frame(table.output)
table.output
} )
# give some details about the tree or link to a webpage connecting to that tree details
#colnames(dat)
# use the user input of trees to filter data
renderTable ({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type convenient
convenient.dat <-input.dat %>%
filter (correct_vs_convenient == "convenient")
# calculate the carbon reduced by one tree by convenient installation
carbon_convenient <- sum(convenient.dat$co2reduction_lb)
#carbon_convenient
# number of trees needed to offset carbon
n_tree_convenient <- round ( as.numeric(input$lbs_carbon)/carbon_convenient)
#n_tree_convenient
# filter type correct
correct.dat <- input.dat %>%
filter (correct_vs_convenient == "correct")
# calculate the carbon reduced by one tree by convenient installation
carbon_correct <- sum(correct.dat$co2reduction_lb)
#carbon_correct
# can't get input$lbs_carbon to work
n_tree_correct <- round (as.numeric(input$lbs_carbon)/carbon_correct)
#n_tree_correct
table.output <- matrix(c(carbon_convenient, n_tree_convenient, carbon_correct, n_tree_correct ), ncol=2,byrow=TRUE)
colnames(table.output) <- c("Carbon_reduced_LBS)","Number_of_trees_needed")
rownames(table.output) <- c("Convenient Planting","Correct Planting")
table.output <- data.frame(table.output)
table.output
} )
# give some details about the tree or link to a webpage connecting to that tree details
selectInput("lbs_carbon", label = "Carbon generated by a round trip airtravel:",
choices = c(3700, 1270, 950,380), selected = 3700)
selectInput("species_trees", label = "Type of the tree to be planted:",
choices = c("mesquite", "blue palo verde", "aleppo pine", "palo brea", "chinese elm"), selected = "mesquite")
# NPV from the tree installtion and explaination in case of correct and convenient installtion
#NPV(cf0,cf,times,i,plot=FALSE)
cost.convenient.y0 <-  convenient.dat %>%
filter (year == 0) %>%
select (cost_total)
cashflow.convenient.yearly <- convenient.dat %>%
filter (year == 1 |  year == 2 | year == 3 | year == 4 | year == 5 | year == 6 |year == 7 | year == 8 | year == 9 |
year == 10 | year == 11| year == 12| year == 13 | year == 14 | year == 15 | year == 16 | year == 17 | year == 18 |
year == 19| year == 20| year == 21| year == 22| year == 23 | year == 24 | year == 25 | year == 26 | year == 27 |
year == 28 | year == 29 | year == 30 ) %>%
select(ben_total)
times.convenient <- 1:30
interest.npv <- as.numeric(.03)
npv.convenient <- NPV (as.numeric(cost.convenient.y0), as.numeric(is.numeric(cashflow.convenient.yearly)), as.numeric(is.numeric(times.convenient)), interest.npv, plot=FALSE )
npv.table.convenient <- data.frame ( "Details" = c("Net Present Value of benefits over 30 years period from Planting tree           CONVENIENTLY"),
"Value" = npv.convenient)
kable (npv.table.convenient) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = F, position = "left")
# NPV from the tree installtion and explaination in case of correct and convenient installtion
#NPV(cf0,cf,times,i,plot=FALSE)
cost.correct.y0 <-  correct.dat %>%
filter (year == 0) %>%
select (cost_total)
cashflow.correct.yearly <- correct.dat %>%
filter (year == 1 |  year == 2 | year == 3 | year == 4 | year == 5 | year == 6 |year == 7 | year == 8 | year == 9 |
year == 10 | year == 11| year == 12| year == 13 | year == 14 | year == 15 | year == 16 | year == 17 | year == 18 |
year == 19| year == 20| year == 21| year == 22| year == 23 | year == 24 | year == 25 | year == 26 | year == 27 |
year == 28 | year == 29 | year == 30 ) %>%
select(ben_total)
times.correct <- 1:30
interest.npv <- as.numeric(.03)
npv.correct <- NPV (as.numeric(cost.correct.y0), as.numeric(is.numeric(cashflow.correct.yearly)), as.numeric(is.numeric(times.correct)), interest.npv, plot=FALSE )
npv.table.correct <- data.frame ( "Details" = c("Net Present Value of benefits over 30 years period from Planting tree CORRECTLY"),
"Value" = npv.correct)
kable (npv.table.correct) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = F, position = "left")
npv.correct <- NPV (as.numeric(cost.correct.y0), as.numeric(cashflow.correct.yearly), times.correct, interest.npv, plot=FALSE )
npv.correct <- NPV (as.numeric(cost.correct.y0), is.numeric(cashflow.correct.yearly), times.correct, interest.npv, plot=FALSE )
cashflow.correct.yearly
as.numeric(unlist(cashflow.correct.yearly[[1]]))
npv.correct <- NPV (as.numeric(cost.correct.y0), cashflow.correct.yearly, times.correct, interest.npv, plot=FALSE )
cashflow.correct.yearly <- as.numeric(unlist(cashflow.correct.yearly[[1]]))
cashflow.correct.yearly
npv.correct <- NPV (as.numeric(cost.correct.y0), cashflow.correct.yearly, times.correct, interest.npv, plot=FALSE )
# NPV from the tree installtion and explaination in case of correct and convenient installtion
#NPV(cf0,cf,times,i,plot=FALSE)
cost.convenient.y0 <-  convenient.dat %>%
filter (year == 0) %>%
select (cost_total)
cashflow.convenient.yearly <- convenient.dat %>%
filter (year == 1 |  year == 2 | year == 3 | year == 4 | year == 5 | year == 6 |year == 7 | year == 8 | year == 9 |
year == 10 | year == 11| year == 12| year == 13 | year == 14 | year == 15 | year == 16 | year == 17 | year == 18 |
year == 19| year == 20| year == 21| year == 22| year == 23 | year == 24 | year == 25 | year == 26 | year == 27 |
year == 28 | year == 29 | year == 30 ) %>%
select(ben_total)
cashflow.convenient.yearly <- as.numeric(unlist(cashflow.convenient.yearly[[1]]))
times.convenient <- as.numeric(1:30)
interest.npv <- as.numeric(.03)
npv.convenient <- NPV (as.numeric(cost.convenient.y0), cashflow.convenient.yearly, times.convenient, interest.npv, plot=FALSE )
npv.table.convenient <- data.frame ( "Details" = c("Net Present Value of benefits over 30 years period from Planting tree           CONVENIENTLY"),
"Value" = npv.convenient)
kable (npv.table.convenient) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = F, position = "left")
dat
#message=FALSE, warning=FALSE, include=FALSE, echo=FALSE
# install packages and library
# install.packages("leaflet")
#install.packages("flexdashboard")
#install.packages("shiny")
#install.packages("here")
#install.packages("dplyr")
#install.packages ("kableExtra")
#install.packages ("FinancialMath")
library(shiny)
library(flexdashboard)
library(leaflet)
library(here)
library(dplyr)
library(kableExtra)
library(FinancialMath)
# message=FALSE, warning=FALSE, include=FALSE, echo=FALSE
# load data
dat <- read.csv(here("data/trees-cost-benefit.csv"))
dat.cost.correct <- read.csv(here("data/costdetails_correct.csv"))
dat.cost.convenient <- read.csv(here("data/costdetails_convenient.csv"))
fillRow(
leaflet() %>%
addTiles(options = providerTileOptions(minZoom = 8, maxZoom = 10)) %>%
addMarkers(lng=-112.0740, lat=33.4484, popup="City Center Phoenix, AZ")
)
selectInput("lbs_carbon", label = "Carbon generated by a round trip airtravel:",
choices = c(3700, 1270, 950,380), selected = 3700)
selectInput("species_trees", label = "Type of the tree to be planted:",
choices = c("mesquite", "blue palo verde", "aleppo pine", "palo brea", "chinese elm"), selected = "mesquite")
#colnames(dat)
# use the user input of trees to filter data
renderTable ({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type convenient
convenient.dat <-input.dat %>%
filter (correct_vs_convenient == "convenient")
# calculate the carbon reduced by one tree by convenient installation
carbon_convenient <- sum(convenient.dat$co2reduction_lb)
#carbon_convenient
# number of trees needed to offset carbon
n_tree_convenient <- round ( as.numeric(input$lbs_carbon)/carbon_convenient)
#n_tree_convenient
# filter type correct
correct.dat <- input.dat %>%
filter (correct_vs_convenient == "correct")
# calculate the carbon reduced by one tree by convenient installation
carbon_correct <- sum(correct.dat$co2reduction_lb)
#carbon_correct
# can't get input$lbs_carbon to work
n_tree_correct <- round (as.numeric(input$lbs_carbon)/carbon_correct)
#n_tree_correct
table.output <- matrix(c(carbon_convenient, n_tree_convenient, carbon_correct, n_tree_correct ), ncol=2,byrow=TRUE)
colnames(table.output) <- c("Carbon_reduced_LBS","Number_of_trees_needed")
rownames(table.output) <- c("Convenient Planting","Correct Planting")
table.output <- data.frame(table.output)
table.output
} )
# give some details about the tree or link to a webpage connecting to that tree details
correct.dat
correct.dat$co2reduction_lb
# make a graph showing benefit of correct planting the chosen tree /year for 30 years (1 tree)
table.benefit.correct <- correct.dat %>%
select( Year= year,
StormWater_Runoff  = ben_storm_water,
PropertyValue = ben_property_value,
Electricity =  ben_electricity,
AirQuality = ben_air_quality,
NaturalGas = ben_naturalgas,
CarbonReduction = ben_co2_reduction)
kable(table.benefit.correct) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = F, position = "left")
# make a graph showing benefit of correct planting the chosen tree /year for 30 years (1 tree)
renderPlot ({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type correct
correct.dat <-input.dat %>%
filter (correct_vs_convenient == "correct")
#table.benefit.correct <- correct.dat %>%
# select( Year = year,
#      StormWater_Runoff  = ben_storm_water,
#     PropertyValue = ben_property_value,
#     Electricity =  ben_electricity,
#   AirQuality = ben_air_quality,
#    NaturalGas = ben_naturalgas,
#   CarbonReduction = ben_co2_reduction)
# table.benefit.correct
StormWater_Runoff <-  round(sum (ben_storm_water))
PropertyValue <-  round(sum(ben_property_value))
Electricity <- round(sum(ben_electricity))
AirQuality <- round(sum(ben_air_quality))
NaturalGas <- round(sum(ben_naturalgas))
CarbonReduction <- round(sum(ben_co2_reduction))
table.benefit.correct <- (StormWater_Runoff, PropertyValue, Electricity, AirQuality, NaturalGas, CarbonReduction  )
#kable(table.benefit.correct) %>%
# kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = F, position = "left")
})
StormWater_Runoff <-  round(sum (ben_storm_water))
PropertyValue <-  round(sum(ben_property_value))
Electricity <- round(sum(ben_electricity))
AirQuality <- round(sum(ben_air_quality))
NaturalGas <- round(sum(ben_naturalgas))
CarbonReduction <- round(sum(ben_co2_reduction))
# make a graph showing benefit of correct planting the chosen tree /year for 30 years (1 tree)
renderPlot ({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type correct
correct.dat <-input.dat %>%
filter (correct_vs_convenient == "correct")
#table.benefit.correct <- correct.dat %>%
# select( Year = year,
#      StormWater_Runoff  = ben_storm_water,
#     PropertyValue = ben_property_value,
#     Electricity =  ben_electricity,
#   AirQuality = ben_air_quality,
#    NaturalGas = ben_naturalgas,
#   CarbonReduction = ben_co2_reduction)
# table.benefit.correct
StormWater_Runoff <-  round(sum (ben_storm_water))
PropertyValue <-  round(sum(ben_property_value))
Electricity <- round(sum(ben_electricity))
AirQuality <- round(sum(ben_air_quality))
NaturalGas <- round(sum(ben_naturalgas))
CarbonReduction <- round(sum(ben_co2_reduction))
table.benefit.correct <- c(StormWater_Runoff, PropertyValue, Electricity, AirQuality, NaturalGas, CarbonReduction)
#kable(table.benefit.correct) %>%
# kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = F, position = "left")
})
#colnames(dat)
# use the user input of trees to filter data
renderTable ({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type convenient
convenient.dat <-input.dat %>%
filter (correct_vs_convenient == "convenient")
# calculate the carbon reduced by one tree by convenient installation
carbon_convenient <- sum(convenient.dat$co2reduction_lb)
#carbon_convenient
# number of trees needed to offset carbon
n_tree_convenient <- round ( as.numeric(input$lbs_carbon)/carbon_convenient)
tree_convenient_cost <- round(as.numeric (n_tree_convenient*510))
#n_tree_convenient
# filter type correct
correct.dat <- input.dat %>%
filter (correct_vs_convenient == "correct")
# calculate the carbon reduced by one tree by convenient installation
carbon_correct <- sum(correct.dat$co2reduction_lb)
#carbon_correct
# can't get input$lbs_carbon to work
n_tree_correct <- round (as.numeric(input$lbs_carbon)/carbon_correct)
tree_correct_cost <- round (as.numeric(n_tree_correct*14000))
#n_tree_correct
table.output <- matrix(c(carbon_convenient, n_tree_convenient, tree_convenient_cost, carbon_correct, n_tree_correct,   tree_correct_cost ), ncol=3,byrow=TRUE)
colnames(table.output) <- c("Carbon_reduced_LBS","Number_of_trees_needed", "Total Offset Cost")
rownames(table.output) <- c("Convenient Planting","Correct Planting")
table.output <- data.frame(table.output)
table.output
} )
# give some details about the tree or link to a webpage connecting to that tree details
#message=FALSE, warning=FALSE, include=FALSE, echo=FALSE
# install packages and library
# install.packages("leaflet")
#install.packages("flexdashboard")
#install.packages("shiny")
#install.packages("here")
#install.packages("dplyr")
#install.packages ("kableExtra")
#install.packages ("FinancialMath")
library(shiny)
library(flexdashboard)
library(leaflet)
library(here)
library(dplyr)
library(kableExtra)
library(FinancialMath)
# message=FALSE, warning=FALSE, include=FALSE, echo=FALSE
# load data
dat <- read.csv(here("data/trees-cost-benefit.csv"))
dat.cost.correct <- read.csv(here("data/costdetails_correct.csv"))
dat.cost.convenient <- read.csv(here("data/costdetails_convenient.csv"))
fillRow(
leaflet() %>%
addTiles(options = providerTileOptions(minZoom = 8, maxZoom = 10)) %>%
addMarkers(lng=-112.0740, lat=33.4484, popup="City Center Phoenix, AZ")
)
selectInput("lbs_carbon", label = "Carbon generated by a round trip airtravel:",
choices = c(3700, 1270, 950,380), selected = 3700)
selectInput("species_trees", label = "Type of the tree to be planted:",
choices = c("mesquite", "blue palo verde", "aleppo pine", "palo brea", "chinese elm"), selected = "mesquite")
#colnames(dat)
# use the user input of trees to filter data
renderTable ({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type convenient
convenient.dat <-input.dat %>%
filter (correct_vs_convenient == "convenient")
# calculate the carbon reduced by one tree by convenient installation
carbon_convenient <- sum(convenient.dat$co2reduction_lb)
#carbon_convenient
# number of trees needed to offset carbon
n_tree_convenient <- round ( as.numeric(input$lbs_carbon)/carbon_convenient)
tree_convenient_cost <- round(as.numeric (n_tree_convenient*510))
#n_tree_convenient
# filter type correct
correct.dat <- input.dat %>%
filter (correct_vs_convenient == "correct")
# calculate the carbon reduced by one tree by convenient installation
carbon_correct <- sum(correct.dat$co2reduction_lb)
#carbon_correct
# can't get input$lbs_carbon to work
n_tree_correct <- round (as.numeric(input$lbs_carbon)/carbon_correct)
tree_correct_cost <- round (as.numeric(n_tree_correct*14000))
#n_tree_correct
table.output <- matrix(c(carbon_convenient, n_tree_convenient, tree_convenient_cost, carbon_correct, n_tree_correct,   tree_correct_cost ), ncol=3,byrow=TRUE)
colnames(table.output) <- c("Carbon_reduced_LBS","Number_of_trees_needed", "Total Offset Cost")
rownames(table.output) <- c("Convenient Planting","Correct Planting")
table.output <- data.frame(table.output)
table.output
} )
# give some details about the tree or link to a webpage connecting to that tree details
# Correct Installtion
# make a table showing cost in half of story board
kable(dat.cost.correct) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = F, position = "left")
# convenient Installtion
# make a table SHowing cost in half of story board
kable(dat.cost.convenient) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = F, position = "left")
# make a graph showing benefit of correct planting the chosen tree /year for 30 years (1 tree)
renderPlot ({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type correct
correct.dat <-input.dat %>%
filter (correct_vs_convenient == "correct")
StormWater_Runoff <-  round(sum (correct.dat$ben_storm_water))
PropertyValue <-  round(sum(correct.dat$ben_property_value))
Electricity <- round(sum(correct.dat$ben_electricity))
AirQuality <- round(sum(correct.dat$ben_air_quality))
NaturalGas <- round(sum(correct.dat$ben_naturalgas))
CarbonReduction <- round(sum(correct.dat$ben_co2_reduction))
table.benefit.correct <- c(StormWater_Runoff, PropertyValue, Electricity, AirQuality, NaturalGas, CarbonReduction)
bp.correct <- barplot(table.benefit.correct,
main = "Benefits from planting tree correctly",
xlab = "Benefits in dollars",
ylab = "Amount in dollars",
ylim = c(0,600),
names.arg = c("StormWater_Runoff", "PropertyValue", "Electricity", "AirQuality", "NaturalGas", "CarbonReduction"),
col = "steelblue")
text(bp.correct, 100, round(table.benefit.correct, 1),cex=1,pos=3)
})
# make a graph showing benefit of convenient planting the chosen tree /year for 30 years (1 tree)
renderPlot ({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type convenient
convenient.dat <-input.dat %>%
filter (correct_vs_convenient == "convenient")
StormWater_Runoff <-  round(sum (convenient.dat$ben_storm_water))
PropertyValue <-  round(sum(convenient.dat$ben_property_value))
Electricity <- round(sum(convenient.dat$ben_electricity))
AirQuality <- round(sum(convenient.dat$ben_air_quality))
NaturalGas <- round(sum(convenient.dat$ben_naturalgas))
CarbonReduction <- round(sum(convenient.dat$ben_co2_reduction))
table.benefit.convenient <- c(StormWater_Runoff, PropertyValue, Electricity, AirQuality, NaturalGas, CarbonReduction)
bp.convenient <- barplot(table.benefit.convenient,
main = "Benefits from planting tree conveniently",
xlab = "Benefits in dollars",
ylab = "Amount in dollars",
ylim = c(0,600),
names.arg = c("StormWater_Runoff", "PropertyValue", "Electricity", "AirQuality", "NaturalGas", "CarbonReduction"),
col = "steelblue")
text(bp.convenient, 100, round(table.benefit.convenient, 1),cex=1,pos=3)
})
# NPV from the tree installtion and explaination in case of correct and convenient installtion
#NPV(cf0,cf,times,i,plot=FALSE)
renderTable({
input.dat <- dat %>%
filter (species %in% input$species_trees)
# filter type correct
correct.dat <-input.dat %>%
filter (correct_vs_convenient == "correct")
cost.correct.y0 <-  correct.dat %>%
filter (year == 0) %>%
select (cost_total)
cashflow.correct.yearly <- correct.dat %>%
filter (year == 1 |  year == 2 | year == 3 | year == 4 | year == 5 | year == 6 |year == 7 | year == 8 | year == 9 |
year == 10 | year == 11| year == 12| year == 13 | year == 14 | year == 15 | year == 16 | year == 17 | year == 18 |
year == 19| year == 20| year == 21| year == 22| year == 23 | year == 24 | year == 25 | year == 26 | year == 27 |
year == 28 | year == 29 | year == 30 ) %>%
select(ben_total)
cashflow.correct.yearly <- as.numeric(unlist(cashflow.correct.yearly[[1]]))
times.correct <- as.numeric(1:30)
interest.npv <- as.numeric(.03)
npv.correct <- NPV (as.numeric(cost.correct.y0), cashflow.correct.yearly, times.correct, interest.npv, plot=FALSE )
npv.table.correct <- data.frame ( "Details" = c("Net Present Value of benefits over 30 years period from Planting tree CORRECTLY"),
"Value" = npv.correct)
npv.table.correct
# filter type convenient
convenient.dat <-input.dat %>%
filter (correct_vs_convenient == "convenient")
cost.convenient.y0 <-  convenient.dat %>%
filter (year == 0) %>%
select (cost_total)
cashflow.convenient.yearly <- convenient.dat %>%
filter (year == 1 |  year == 2 | year == 3 | year == 4 | year == 5 | year == 6 |year == 7 | year == 8 | year == 9 |
year == 10 | year == 11| year == 12| year == 13 | year == 14 | year == 15 | year == 16 | year == 17 | year == 18 |
year == 19| year == 20| year == 21| year == 22| year == 23 | year == 24 | year == 25 | year == 26 | year == 27 |
year == 28 | year == 29 | year == 30 ) %>%
select(ben_total)
cashflow.convenient.yearly <- as.numeric(unlist(cashflow.convenient.yearly[[1]]))
times.convenient <- as.numeric(1:30)
interest.npv <- as.numeric(.03)
npv.convenient <- NPV (as.numeric(cost.convenient.y0), cashflow.convenient.yearly, times.convenient, interest.npv, plot=FALSE )
npv.table.convenient <- data.frame ( "Details" = c("Net Present Value of benefits over 30 years period from Planting tree           CONVENIENTLY"),
"Value" = npv.convenient)
#kable (npv.table.convenient) %>%
#  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = F, position = "left")
npv.table.output <- matrix(c(npv.convenient, npv.correct ), ncol=1,byrow=TRUE)
colnames(npv.table.output) <- c("NPV")
rownames(npv.table.output) <- c("Convenient Planting","Correct Planting")
npv.table.output <- data.frame(npv.table.output)
npv.table.output
})
#message=FALSE, warning=FALSE, include=FALSE, echo=FALSE
# install packages and library
# install.packages("leaflet")
#install.packages("flexdashboard")
#install.packages("shiny")
#install.packages("here")
#install.packages("dplyr")
#install.packages ("kableExtra")
#install.packages ("FinancialMath")
library(shiny)
library(flexdashboard)
library(leaflet)
library(here)
library(dplyr)
library(kableExtra)
library(FinancialMath)
# message=FALSE, warning=FALSE, include=FALSE, echo=FALSE
# load data
dat <- read.csv(here("data/trees-cost-benefit.csv"))
dat.cost.correct <- read.csv(here("data/costdetails_correct.csv"))
dat.cost.convenient <- read.csv(here("data/costdetails_convenient.csv"))
